setwd("C:/Users/jmaburto/Documents/GitHub/DecompMex/DecompMex")
: these data do not contain Not Specified categories
load('Data/Counts&Rates_1990-2015Mex.RData')
#Groups used in the article:
# 1. Amenable to meical service: 1+2+3+4+6
# 2. Diabetes: 5
# 3. IHD:7
# 4. HIV:8
# 5. Lung cancer: 10
# 6. Cirrhosis: 11
# 7. Homicide: 12
# 8. Road traffic: 13
# 9. Suicide: 9
# 10. All other causes: 14+15+16
#group accordingly
Counts <- Data_Counts[,1:4]
Counts <- cbind(Counts, g1=rowSums(Data_Counts[, c(6,7,8,9,11)]))
Counts <- cbind(Counts, g2=Data_Counts[,10])
Counts <- cbind(Counts, g3=Data_Counts[,12])
Counts <- cbind(Counts, g4=Data_Counts[,13])
Counts <- cbind(Counts, g5=Data_Counts[,15])
Counts <- cbind(Counts, g6=Data_Counts[,16])
Counts <- cbind(Counts, g7=Data_Counts[,17])
Counts <- cbind(Counts, g8=Data_Counts[,18])
Counts <- cbind(Counts, g9=Data_Counts[,14])
Counts <- cbind(Counts, g10=rowSums(Data_Counts[,19:21]))
Counts <- cbind(Counts, g11=rowSums(Counts[,5:14]))
Counts$Pop <- Data_Counts$Pop
Rates <- Data_rates[,c(1:4,21)]
gdata::keep(Counts,Rates, sure = T)
library(data.table)
Counts <- data.table(Counts)
Rates <- data.table(Rates)
am.names <- c("Causes amenable to medical service","Diabetes","Ischemic heart diseases",
"HIV/AIDS","Lung cancer","Cirrhosis","Homicide","Road traffic accidents",
"Suicide","Other causes")
am.names <- c("Causes amenable to medical service","Diabetes","Ischemic heart diseases",
"HIV/AIDS","Lung cancer","Cirrhosis","Homicide","Road traffic accidents",
"Suicide","Other causes")
library(xtable)
library(reshape2)
library(latticeExtra)
Dx <- melt(Counts, id.vars = 1:4, variable.name = "cause", value.name = "Dx" )
Dxc <- tapply(Dx$Dx,list(Dx$year, Dx$cause), sum)
View(Dxc)
Dxc <- tapply(Dx$Dx,list(Dx$year, Dx$cause), sum)[,1:11]
View(Dxc)
Dxc <- tapply(Dx$Dx,list(Dx$year, Dx$cause), sum)[,1:10]
am.names <- c("Causes amenable to medical service","Diabetes","Ischemic heart diseases",
"HIV/AIDS","Lung cancer","Cirrhosis","Homicide","Road traffic accidents",
"Suicide","Other causes")
tab1<- round(Dxc/1000,0)
View(tab1)
per <-   round(t(100 * Dxc/ rowSums(Dxc)),1)
t1  <- paste(per[,1],"%",sep=" ")
t1
t2  <- paste(per[,2],"%",sep=" ")
ta  <- cbind(Category=am.names,Males =t1,MalesPercent=tab1[1,],Females=t2,FemalesPercent=tab1[2,])
ta
tab1<- round(Dxc/1000,1)
per <-   round(t(100 * Dxc/ rowSums(Dxc)),1)
t1  <- paste(per[,1],"%",sep=" ")
t2  <- paste(per[,2],"%",sep=" ")
ta  <- cbind(Category=am.names,Males =t1,MalesPercent=tab1[1,],Females=t2,FemalesPercent=tab1[2,])
View(tab1)
Dx.75 <- Dx[age<76]
View(Dx.75)
Dxc2 <- tapply(Dx.75$Dx,list(Dx.75$year, Dx.75$cause), sum)[,1:10]
am.names <- c("Causes amenable to medical service","Diabetes","Ischemic heart diseases",
"HIV/AIDS","Lung cancer","Cirrhosis","Homicide","Road traffic accidents",
"Suicide","Other causes")
tab1<- round(Dxc/1000,1)
per <-   round(t(100 * Dxc/ rowSums(Dxc)),1)
t1  <- paste(per[,1],"%",sep=" ")
t2  <- paste(per[,2],"%",sep=" ")
ta  <- cbind(Category=am.names,Males =t1,MalesPercent=tab1[1,],Females=t2,FemalesPercent=tab1[2,])
ta
tab1<- round(Dxc2/1000,1)
per <-   round(t(100 * Dxc2/ rowSums(Dxc)),1)
t1  <- paste(per[,1],"%",sep=" ")
t2  <- paste(per[,2],"%",sep=" ")
ta  <- cbind(Category=am.names,Males =t1,MalesPercent=tab1[1,],Females=t2,FemalesPercent=tab1[2,])
ta
print(xtable(prettyNum(ta,big.mark=","),
caption = "Avoidable Mortality classification,
with crude percentages below age 75.",
label="tab:causes"), include.rownames=F,caption.placement = "top")
