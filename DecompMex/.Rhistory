Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15))
Fig0_14
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key=list(space="bottom",background="white",text=list(c('State temp e(0)','VG temp e(0)','BP temp e(0)')),cex=.8,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=pretty(ylim),alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,4)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),fig.key=F)
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),fig.key=FALSE)
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="white",text=list(c('State temp e(0)','VG temp e(0)','BP temp e(0)')),cex=.8,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))))
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','low benchmark')),cex=.8,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))
)
Fig15_39
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('','','')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("transparent","transparent","transparent"))))
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))
)
Fig15_39
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("transparent","transparent","transparent"))))
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))
)
Fig15_39
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=col=c("black","red","blue"))))
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))))
Fig0_14
Fig0_14
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key=list(space="bottom",background="white",text=list(c('State temp e(0)','VG temp e(0)','BP temp e(0)')),cex=.8,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=pretty(ylim),alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,4)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab="temp e(0)",
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="transparent",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue")))
)
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","red","blue"))))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))))
Fig0_14
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))))
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))))
Fig15_39
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))))
Fig40_74
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))))
Fig40_74
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key=list(space="bottom",background="white",text=list(c('State temp e(0)','VG temp e(0)','BP temp e(0)')),cex=.8,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1="Temporary life expectancy"){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=pretty(ylim),alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,4)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"#,
#			key=list(space="bottom",background="white",text=list(c('Life Expectancy','VG Life Expectancy','BP Life Expectancy')),cex=.8,
#					lines=list(lty=1,lwd=2,col=c(makeTransparent("black",alpha=65),makeTransparent("red",alpha=100),
#									makeTransparent("blue",alpha=100)))),
#			scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,2))),
#					y=list(cex=.75,at=c(seq(55,77,5)),alternating=1)),
#			panel = function(x, y, ...){
#				panel.abline(v=c(seq(1990,2010,1)),col='dark grey',lty=3)
#				panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=1)
#				panel.abline(h=c(seq(0,90,5)),col='dark grey',lty=3)
#				panel.xyplot(x, y,lty=1,...)
#
#			}
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy")
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=F)
Fig15_39
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1="")
Fig15_39
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=" ")
Fig15_39
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1=" ")
Fig40_74
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key,ylab1){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=pretty(ylim),alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,4)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy")
Fig0_14
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key,ylab1,at1){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=at1,alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,4)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy",at1=pretty(ylim))
seq(14,14.8,.2)
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy",at1=seq(14,14.8,.2))
Fig0_14
Fig15_39
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=" ",at1=seq(22.5,24.5,.5))
Fig15_39
Fig40_74
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1=" ",at1=seq(28,34,1))
Fig40_74
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy",at1=seq(14,14.8,.2))
Fig0_14
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=" ",at1=seq(22.5,24.5,.5))
Fig15_39
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1=" ",at1=seq(28,34,1))
Fig40_74
require(gridExtra)
grid.arrange(Fig0_14,Fig15_39,Fig40_74 ncol=3)
grid.arrange(Fig0_14,Fig15_39,Fig40_74, ncol=3)
pdf(file="Figures/Temp_fig.pdf",width=12,height=7,pointsize=12)
grid.arrange(Fig0_14,Fig15_39,Fig40_74, ncol=3)
dev.off()
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"a) Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy",at1=seq(14,14.8,.2))
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"b) Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=" ",at1=seq(22.5,24.5,.5))
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"c) Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1=" ",at1=seq(28,34,1))
require(gridExtra)
pdf(file="Figures/Temp_fig.pdf",width=12,height=7,pointsize=12)
grid.arrange(Fig0_14,Fig15_39,Fig40_74, ncol=3)
dev.off()
et_trends <- function(states,van,bp,mtitle,ylim = range(pretty(c(states$e0,van$e0,bp$e0))),
fig.key,ylab1,at1){
states$Sex <- factor(states$Sex,levels=c(1,2),labels=c("Males", "Females"))
van$Sex <- factor(van$Sex,levels=c(1,2),labels=c("Males", "Females"))
bp$Sex <- factor(bp$Sex,levels=c(1,2),labels=c("Males", "Females"))
Fig1<-xyplot(e0~Year|Sex,data=states,groups=State,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col=makeTransparent("black",alpha=65),par.settings=my.settings,xlab="Period",
key=fig.key,
scales=list(alternating=1,x=list(cex=.75,at=c(seq(1990,2010,5))),
y=list(cex=.75,at=at1,alternating=1)),
panel = function(x, y, ...){
panel.abline(v=c(seq(1990,2010,5)),col='dark grey',lty=3)
panel.xyplot(x, y,lty=1,...)
}
)
Fig2<-xyplot(e0~Year|Sex,data=van,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="red",par.settings=my.settings,xlab="Period"
)
Fig3<-xyplot(e0~Year|Sex,data=bp,type="l",lwd=2,between=list(x=2),
xlim=c(1990,2010),main=mtitle,ylim=ylim,ylab=ylab1,
layout=c(1,2),strip.left=T,strip=F,
col="blue",par.settings=my.settings,xlab="Period"
)
Fig4  <- Fig1 + Fig2 + Fig3
return(Fig4)
}
source("R/1_CalculateBPe0etc.R")
source("R/SmoothMsx.R")
Fig0_14  <- et_trends(ste0_14,van0_14,bpe0_14,"a) Young",c(14,15),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1="Temporary life expectancy",at1=seq(14,14.8,.2))
Fig15_39 <- et_trends(ste15_39,van15_39,bpe15_39,"b) Young adults",c(22.5,25),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark')),cex=1.2,
lines=list(lty=1,lwd=2,col=c("black","red","blue"))),
ylab1=" ",at1=seq(22.5,24.5,.5))
Fig40_74 <- et_trends(ste40_74,van40_74,bpe40_74,"c) Older adults",c(28,35),
fig.key=list(space="bottom",background="transparent",
text=list(c('State','Record holder','Low benchmark'),
col="white"),cex=1.2,
lines=list(lty=1,lwd=2,col=c("white","white","white"))),
ylab1=" ",at1=seq(28,34,1))
require(gridExtra)
pdf(file="Figures/Temp_fig.pdf",width=12,height=7,pointsize=12)
grid.arrange(Fig0_14,Fig15_39,Fig40_74, ncol=3)
dev.off()
