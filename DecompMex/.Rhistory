if (system("hostname",intern=TRUE) == "ADM-108625") {
setwd("C:/Users/jmaburto/Documents/GitHub/DecompMex/DecompMex")
} else {
if (system("hostname",intern=TRUE) %in% c("triffe-N80Vm", "tim-ThinkPad-L440")){
# if I'm on the laptop
setwd("/home/tim/git/DecompMex/DecompMex")
} else {
# in that case I'm on Berkeley system, and other people in the dept can run this too
setwd(paste0("/data/commons/",system("whoami",intern=TRUE),"/git/DecompMex/DecompMex"))
}}
library(latticeExtra)
library(data.table)
load("Data/Temp_e0_results.RData")
source("R/Functions_fig.R")
fig1.data <- temp.data
fig1.data$age.g <- factor(fig1.data$age.g,levels = 1:3, labels = c("Young (0-14)","Young adults (15-49)","Older adults (50-84)"))
fig1.data$sex<- factor(fig1.data$sex,levels = 1:2, labels = c("Males","Females"))
mean.state <- fig1.data[,list(temp_e0=mean(temp_e0)),  by = list(year,sex,age.g)]
mean.state$state <- 35
fig.names <- colnames(fig1.data)
head(mean.state)
fig1.data <- rbind(fig1.data,mean.state)
col1 <- makeTransparent("darkgrey",alpha=80)
col2 <- "black"
col3 <- brewer.pal(7,"Blues")[c(6)]
unique(fig1.data$state)
if (system("hostname",intern=TRUE) == "ADM-108625") {
setwd("C:/Users/jmaburto/Documents/GitHub/DecompMex/DecompMex")
} else {
if (system("hostname",intern=TRUE) %in% c("triffe-N80Vm", "tim-ThinkPad-L440")){
# if I'm on the laptop
setwd("/home/tim/git/DecompMex/DecompMex")
} else {
# in that case I'm on Berkeley system, and other people in the dept can run this too
setwd(paste0("/data/commons/",system("whoami",intern=TRUE),"/git/DecompMex/DecompMex"))
}}
source("R/Functions.R")
#Groups used in the article:
# 1. Amenable to meical service: 1+2+3+4+6
# 2. Diabetes: 5
# 3. IHD:7
# 4. HIV:8
# 5. Lung cancer: 10
# 6. Cirrhosis: 11
# 7. Homicide: 12
# 8. Road traffic: 13
# 9. Suicide: 9
# 10. All other causes: 14+15+16
library(data.table)
library(reshape2)
## minimum mortality rates by state, year, sex, cause
#constrain to the original ones
#data       <- local(get(load("Data/smoothed rates_ConstraintOrig.RData")))
#constrain to the smoothed total ones
#data       <- local(get(load("Data/smoothed rates_ConstraintSmooth.RData")))
# No constrain, sum over smoother causes
#data       <- local(get(load("Data/smoothed rates_No Constraint.RData")))
#data <- local(get(load("Data/Total_Smooth.RData")))
Mxsc       <- data[,-c(5),with=F]
Mxsc       <- melt.data.table(Mxsc,id.vars = 1:4,variable.name = "cause",value.name = "mx")
Mxscmin    <- Mxsc[,min(mx), by = list(year, sex, age, cause)]
Mxsmin     <- Mxscmin[,list(mx_min=sum(V1)),by=list(year, sex, age)]
# object with minimum death rates for every year by sex and age
head(Mxsmin)
if (system("hostname",intern=TRUE) == "ADM-108625") {
setwd("C:/Users/jmaburto/Documents/GitHub/DecompMex/DecompMex")
} else {
if (system("hostname",intern=TRUE) %in% c("triffe-N80Vm", "tim-ThinkPad-L440")){
# if I'm on the laptop
setwd("/home/tim/git/DecompMex/DecompMex")
} else {
# in that case I'm on Berkeley system, and other people in the dept can run this too
setwd(paste0("/data/commons/",system("whoami",intern=TRUE),"/git/DecompMex/DecompMex"))
}}
source("R/Functions.R")
#Groups used in the article:
# 1. Amenable to meical service: 1+2+3+4+6
# 2. Diabetes: 5
# 3. IHD:7
# 4. HIV:8
# 5. Lung cancer: 10
# 6. Cirrhosis: 11
# 7. Homicide: 12
# 8. Road traffic: 13
# 9. Suicide: 9
# 10. All other causes: 14+15+16
library(data.table)
library(reshape2)
data       <- local(get(load("Data/smoothed rates_ConstraintSmooth.RData")))
Mxsc       <- data[,-c(5),with=F]
Mxsc       <- melt.data.table(Mxsc,id.vars = 1:4,variable.name = "cause",value.name = "mx")
Mxscmin    <- Mxsc[,min(mx), by = list(year, sex, age, cause)]
Mxscmin
